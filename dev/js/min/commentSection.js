$(document).ready(function(){React.render(React.createElement(CommentBox,{url:"api/comment"}),document.getElementById("content-wrapper"))});var CommentBox=React.createClass({displayName:"CommentBox",loadCommentsFromServer:function(){$.ajax({url:this.props.url,dataType:"json",success:function(a){this.setState({data:a})}.bind(this),error:function(a,b,c){console.error(this.props.url,b,c.toString())}.bind(this)})},handleCommentSubmit:function(a){var b=this.state.data,c=b.concat([a]);this.setState({data:c}),$.ajax({url:this.props.url,dataType:"json",type:"POST",data:a,success:function(a){this.setState({data:a})}.bind(this),error:function(a,b,c){console.error(this.props.url,b,c.toString())}.bind(this)})},getInitialState:function(){return{data:[]}},componentDidMount:function(){this.loadCommentsFromServer()},render:function(){return React.createElement("div",{className:"commentBox"},React.createElement("h3",null,"Comments"),React.createElement(CommentList,{data:this.state.data}),React.createElement(CommentForm,{onCommentSubmit:this.handleCommentSubmit}))}}),CommentList=React.createClass({displayName:"CommentList",render:function(){var a=this.props.data.map(function(a){return React.createElement(Comment,{author:a.author},a.text)});return React.createElement("div",{className:"commentList"},a)}}),CommentForm=React.createClass({displayName:"CommentForm",handleSubmit:function(a){a.preventDefault();var b=this.refs.author.getDOMNode().value.trim(),c=this.refs.text.getDOMNode().value.trim();c&&b&&(this.props.onCommentSubmit({author:b,text:c}),this.refs.author.getDOMNode().value="",this.refs.text.getDOMNode().value="")},render:function(){return React.createElement("div",{className:"commentForm"},React.createElement("form",{className:"commentForm",onSubmit:this.handleSubmit},React.createElement("input",{type:"text",placeholder:"Your name",ref:"author"}),React.createElement("input",{type:"text",placeholder:"Say something...",ref:"text"}),React.createElement("input",{type:"submit",value:"Post"})))}}),Comment=React.createClass({displayName:"Comment",render:function(){return React.createElement("div",{className:"comment"},React.createElement("h4",{className:"author"},this.props.author),React.createElement("span",null,this.props.children.toString()))}});